(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[0],{1156:function(e,t,a){var i=a(1399);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=a(41).default;r("19fa6d82",i,!0,{sourceMap:!1})},1398:function(e,t,a){"use strict";a(1156)},1399:function(e,t,a){t=e.exports=a(40)(!1),t.push([e.i,".lg-prompt[data-v-378c518c]{position:fixed;left:0;right:0;top:0;bottom:0;z-index:998;background-color:rgba(0,0,0,.3)}.lg-prompt.prompt-fade-enter-active[data-v-378c518c]{animation:confirm-fadein .3s}.lg-prompt.prompt-fade-enter-active .content[data-v-378c518c]{animation:confirm-zoom .3s}.lg-prompt .prompt-wrapper[data-v-378c518c]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}.lg-prompt .prompt-wrapper .content[data-v-378c518c]{padding:.37333rem;background:#fff}.lg-prompt .prompt-wrapper .content .title[data-v-378c518c]{font-size:.21333rem;font-family:AirbnbCerealApp-Bold,AirbnbCerealApp;font-weight:700;line-height:.41333rem;color:#000}.lg-prompt .prompt-wrapper .content input[data-v-378c518c]{outline:none;margin-top:.10667rem;border:1px solid #000;width:5.90667rem;height:.53333rem;padding:0 .16rem}.lg-prompt .prompt-wrapper .content input[data-v-378c518c]:focus{outline:.06667rem solid #f1f5f6}.lg-prompt .prompt-wrapper .footer[data-v-378c518c]{margin-top:.34667rem;display:flex;align-items:center;text-align:center;justify-content:flex-end;font-size:.24rem}.lg-prompt .prompt-wrapper .footer span[data-v-378c518c]{cursor:pointer;font-size:.21333rem;font-family:AirbnbCerealApp-Book,AirbnbCerealApp;display:inline-block;width:1.17333rem;height:.53333rem;line-height:.53333rem}.lg-prompt .prompt-wrapper .footer span.cancel[data-v-378c518c]{color:#000}.lg-prompt .prompt-wrapper .footer span.confirm[data-v-378c518c]{border:1px solid #000;background:#000;color:#fff}@keyframes prompt-fadein-data-v-378c518c{0%{opacity:0}to{opacity:1}}@keyframes prompt-zoom-data-v-378c518c{0%{transform:scale(0)}50%{transform:scale(1.1)}to{transform:scale(1)}}",""])},539:function(e,t,a){"use strict";function i(e){return e.getContext("2d")}function r(e,t,a){void 0===a&&(a=!1);var r=document.createElement("canvas"),n=i(r);return"number"===typeof e?(r.width=e,r.height=t,a=a||!1):a="boolean"===typeof e&&e,n.imageSmoothingEnabled=a,{canvas:r,ctx:n}}a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r}))},690:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return n}));var i={};function r(e,t){if(void 0===t&&(t=!1),t&&i[e])return i[e];var a=new Promise((function(a,r){var n=new Image;n.onload=function(){delete n.onload,a(n)},n.onerror=function(a){t&&delete i[e],delete n.onerror,r(a)},n.crossOrigin="crossOrigin",n.src=e}));return t&&(i[e]=a),a}function n(e){return new Promise((function(t,a){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=function(){a(new Error("图片加载错误"))},i.readAsDataURL(e)})).then((function(e){return r(e)}))}},864:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("FilePicker",{ref:"filepicker",attrs:{accept:e.accept,multiple:e.multiple,max:e.max,validate:e.innerValidate,strictMIMEValidation:e.strictMIMEValidation,dragAndDrop:e.dragAndDrop,clipboard:e.clipboard,dropNodeSelector:e.dropNodeSelector,uploadApi:e.uploadApi,disabled:e.disabled,"use-custom-prompt":e.useCustomPrompt},on:{dragover:function(t){return e.$emit("dragover",t)},dragleave:function(t){return e.$emit("dragleave",t)},drop:function(t){return e.$emit("drop",t)},change:e.onChange,onDisabled:function(t){return e.$emit("onDisabled")},error:e.onError,linkprogress:function(t){return e.$emit("linkprogress",t)},changeLink:function(t,a,i){return e.$emit("changeLink",t,a,i)}}},[e._t("default")],2)},r=[],n=a(690),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{class:[e.disabled&&"file-picker--disabled"],on:{click:e.checkStatus,dragover:function(e){return e.preventDefault(),e.preventDefault()},drop:e.handleDrop}},[e._t("default"),a("input",{ref:"input",staticClass:"file-picker",attrs:{type:"file",hidden:"",accept:e.accept,multiple:e.multiple,capture:e.capture,disabled:e.disabled},on:{change:e.handleInput}})],2)},s=[],l=a(7),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"prompt-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showFlag,expression:"showFlag"}],staticClass:"lg-prompt"},[a("div",{staticClass:"prompt-wrapper"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[e._v(e._s(e.title))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{autofocus:"autofocus",type:"text"},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirm.apply(null,arguments)},input:function(t){t.target.composing||(e.value=t.target.value)}}}),a("div",{staticClass:"footer"},[a("span",{staticClass:"cancel",on:{click:e.cancel}},[e._v(e._s(e.cancelBtnText))]),a("span",{staticClass:"confirm",on:{click:e.confirm}},[e._v(e._s(e.ConfirmBtnText))])])])])])])},p=[],u={props:{tips:String},data(){return{showFlag:!1,title:"",value:"",ConfirmBtnText:"",cancelBtnText:""}},methods:{show(e){return this.showFlag=!0,"function"===typeof e&&e.call(this,this),new Promise((e,t)=>{this.reject=t,this.resolve=e})},cancel(){this.reject("cancel"),this.hide()},confirm(){this.resolve(this.value),this.hide()},hide(){this.showFlag=!1,document.body.removeChild(this.$el),this.$destroy()}}},d=u,h=(a(1398),a(33)),f=Object(h["a"])(d,c,p,!1,null,"378c518c",null),m=f.exports;let g="";const v=l["default"].extend(m),y=()=>{g=new v,document.body.appendChild(g.$mount().$el)};var b=e=>(g||y(),Object.assign(g,e),g.show(()=>{g=null}));function w(e,t){return new Promise((a,i)=>{try{e.clipboardData.items[t].getAsString(e=>{/<meta charset='utf-8'>/.test(e)?a(Date.now().toString()):a(e)})}catch(r){i(r)}})}l["default"].prototype.$Prompt=b;var x=l["default"].extend({inject:{filterTypeErrorFile:{default:!1}},props:{accept:{type:String,default:"image/jpg, image/jpeg, image/png"},capture:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},max:{type:Number,default:1/0},validate:{type:Function},strictMIMEValidation:{type:Boolean,default:!1},dragAndDrop:{type:Boolean,default:!0},clipboard:{type:Boolean,default:!0},dropNodeSelector:{type:String},uploadApi:{type:Function},disabled:{type:Boolean,default:!1},useCustomPrompt:{type:Boolean,default:!1}},data(){return{useMIMEValiation:!1}},computed:{dropNode(){return document.querySelector(this.dropNodeSelector)||document}},watch:{accept(){this.validateAcceptProps()},strictMIMEValidation(){this.validateAcceptProps()}},mounted(){this.validateAcceptProps(),this.registerEvent()},beforeDestroy(){this.unregisterEvent()},methods:{async handleInput(e){let t=e.target.files;if(!t)return;t=Array.from(t),e.target.value="";const a=await this.validateFiles(t,"input");this.emitFiles(a,"input")},async handleDrop(e){if(!this.dragAndDrop)return;if(e.preventDefault(),!e.dataTransfer)return;const t=e.dataTransfer.files;if(!t.length)return;const a=await this.validateFiles(t,"drop");this.emitFiles(a,"drop")},async handlePaste(e){if(!e.clipboardData)return;let t=[];const a=navigator.userAgent;/chrome/i.test(a)?t=await this.parseClipboardDataForChrome(e):(/safari/i.test(a)||/firefox/i.test(a))&&(t=this.parseClipboardDataForSafariAndFireFox(e));const i=await this.validateFiles(t,"paste");this.emitFiles(i,"paste")},async handleLink(){let e=null;if(e=this.useCustomPrompt?await this.$Prompt({title:this.$t("message.inputUrlTips"),ConfirmBtnText:this.$t("message.ok"),cancelBtnText:this.$t("message.cancel")}).catch():window.prompt(this.$t("message.inputUrlTips")),null!==e)if(e)try{if(this.$emit("linkprogress",0),!this.uploadApi)return void this.$emit("error",Error(this.$t("message.uploadApiRequire")),"link");const t=await this.uploadApi(e);if(!t.data)return void this.$emit("error",Error(this.$t("message.imageURLValid")),"link");this.$emit("linkprogress",100),this.$emit("changeLink",t.data,"link",e)}catch(t){t.response&&t.response.data&&t.response.data.message||this.$emit("error",Error(this.$t("message.imageURLValid")),"link")}finally{this.$emit("linkprogress",100)}else this.$emit("error",Error(this.$t("message.inputUrlTips")),"link")},async validateFiles(e,t){const a=[];for(let r=0;r<e.length;r++){const n=e[r];if(this.useMIMEValiation){const e=this.accept.toUpperCase().replace(/\w+\//g,"").replace(/, ?/g,"/"),a=this.$t("message.fileInvalid",{types:e});if(!n.type){if(this.filterTypeErrorFile)continue;return this.$emit("error",Error(a),t),[]}const i=this.accept.includes(n.type);if(!i){if(this.filterTypeErrorFile)continue;return this.$emit("error",Error(a),t),[]}}if(this.validate)try{const e=await this.validate(n);if(!e)continue}catch(i){return this.$emit("error",i,t),[]}a.push(n)}return a},validateAcceptProps(){if(!this.strictMIMEValidation)return void(this.useMIMEValiation=!1);const e=this.accept.split(/, ?/);for(let t=0;t<e.length;t++){const a=e[t];if(!/^[-\w.]+\/[-\w.]+$/gm.test(a))return void(this.useMIMEValiation=!1)}this.useMIMEValiation=!0},async parseClipboardDataForChrome(e){const{items:t}=e.clipboardData,a=[];for(let r=0;r<t.length;r++){const n=t[r];if("file"!==n.kind)continue;let o=n.getAsFile();if(o){if(t[r-1])try{const t=await w(e,r-1)+"."+o.type.split("/")[1];o=new File([o],t,{type:o.type})}catch(i){console.error(i)}a.push(o)}}return a},parseClipboardDataForSafariAndFireFox(e){return e.clipboardData.files},paste(e){this.clipboard&&this.handlePaste(e)},registerEvent(){this.clipboard&&document.addEventListener("paste",this.paste),this.dragAndDrop&&(this.dropNode.addEventListener("dragover",this._handleDragover),this.dropNode.addEventListener("dragleave",this._handleDragleave),this.dropNode.addEventListener("drop",this._handleDrop))},unregisterEvent(){document.removeEventListener("paste",this.paste),this.dropNode.removeEventListener("dragover",this._handleDragover),this.dropNode.removeEventListener("dragleave",this._handleDragleave),this.dropNode.removeEventListener("drop",this._handleDrop)},emitFiles(e,t){e.length&&(this.multiple?e.length>this.max&&(e=e.slice(0,this.max)):e=[e[0]],this.$emit("change",e,t),this.$emit("input",e,t))},checkStatus(){const e=this.$refs.input;e&&e.disabled&&this.$emit("onDisabled")},_handleDragEvent(e,t,a){e.dataTransfer.types.includes("Files")&&this.dragAndDrop&&(e.preventDefault(),e.stopPropagation(),this.$emit(t,e),a&&a(e))},_handleDragover(e){this._handleDragEvent(e,"dragover")},_handleDragleave(e){this._handleDragEvent(e,"dragleave")},_handleDrop(e){this._handleDragEvent(e,"drop",this.handleDrop)}},i18n:{messages:{en:{message:{inputUrlTips:"Paste the image URL.",uploadApiRequire:"Upload API is required",imageURLValid:"Failed,please check the URL again",fileInvalid:"Supported format :{types}",typeInvalid:"{type} is invalid. If choose to use strictMIMEValidation, it needs to input standard MIME type in the “accept “attribute.",ok:"OK",cancel:"Cancel"}},cn:{message:{inputUrlTips:"请输入图片地址",uploadApiRequire:"缺少处理链接下载的接口",imageURLValid:"无法从URL获取图片，请检查网址是否正确",fileInvalid:"仅支持 {types} 格式的文件",typeInvalid:'如果使用strictMIMEValidation，需要在accept属性中传入标准MIME类型。"{type}" 为无效类型。',ok:"确认",cancel:"取消"}},id:{message:{inputUrlTips:"Tempel URL gambar.",ok:"Oke",cancel:"Batal",fileInvalid:"Format yang didukung: {types}"}},"pt-br":{message:{inputUrlTips:"Cole o URL da imagem.",ok:"OK",cancel:"Cancelar",fileInvalid:"Formato compatível: {types}"}}}}}),k=x,E=Object(h["a"])(k,o,s,!1,null,null,null),F=E.exports,$=a(952),D={components:{FilePicker:F},props:{accept:{type:String,default:"image/jpg, image/jpeg, image/png"},multiple:{type:Boolean},max:{type:Number},validate:{type:Function},strictMIMEValidation:{type:Boolean,default:!0},dragAndDrop:{type:Boolean,default:!1},clipboard:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},dropNodeSelector:{type:String},uploadApi:{type:Function},minWidth:{type:Number,default:50},minHeight:{type:Number,default:50},autoOrientation:{type:Boolean,default:!0},maxNameLength:{type:Number,default:64},useCustomPrompt:{type:Boolean,default:!1}},methods:{checkSize(e){if(e.width<this.minWidth||e.height<this.minHeight)throw Error(this.$t("message.imageSize"))},async innerValidate(e){const t=URL.createObjectURL(e);try{const a=await Object(n["b"])(t);return e.width=a.naturalWidth,e.height=a.naturalHeight,this.checkSize(a),this.validate&&await this.validate(e,a),!0}catch(a){return a&&void 0===a.message&&(a.message=this.$t("message.imageLoadFail")),this.$emit("error",a||this.$t("message.imageLoadFail")),!1}},showFileDialog(){this.$el.click()},inputFileFromOutside(e){this.$refs.filepicker.handleInput({target:{files:e}})},onError(e,t){this.$emit("error",e,t)},onChange(e,t){for(let a=0;a<e.length;a++)if(e[a].name.length>this.maxNameLength)return void this.$emit("error",new Error(""+(this.$t("message.imageMaxName")+this.maxNameLength+this.$t("message.imageMaxNameCharacters"))));this.autoOrientation?Promise.all(e.map(e=>Object($["a"])(e))).then(a=>{a.forEach((t,a)=>Object.assign(t,e[a])),this.$emit("change",a,t)}).catch(()=>{this.$emit("error",new Error("部分图像exif调整失败"))}):this.$emit("change",e,t)}},i18n:{messages:{en:{message:{imageSize:"Image size must be over 50px * 50px",imageLoadFail:"Upload failed. This file format is not supported",imageMaxName:"Upload failed, please ensure the file name won't exceed ",imageMaxNameCharacters:" characters"}},cn:{message:{imageSize:"图片最小不能小于 50 * 50",imageLoadFail:"导入失败，不支持的图片类型",imageMaxName:"上传失败，文件名不可超过",imageMaxNameCharacters:"个字符"}},id:{message:{imageSize:"Ukuran gambar harus lebih dari 50x50 piksel",imageLoadFail:"Gagal mengunggah. Format fail ini tidak didukung",imageMaxName:"Gagal mengunggah, pastikan nama fail tidak lebih dari ",imageMaxNameCharacters:" karakter."}},"pt-br":{message:{imageSize:"O tamanho da imagem deve ser superior a 50 px * 50 px",imageLoadFail:"Falha no envio. Este formato de arquivo não é compatível",imageMaxName:"Falha no envio. Garanta que o nome do arquivo não tenha mais do que ",imageMaxNameCharacters:" caracteres."}}}}},C=D,M=Object(h["a"])(C,i,r,!1,null,null,null);t["a"]=M.exports},952:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=function(e,t,a,i){function r(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function o(e){try{l(i.next(e))}catch(t){n(t)}}function s(e){try{l(i["throw"](e))}catch(t){n(t)}}function l(e){e.done?a(e.value):r(e.value).then(o,s)}l((i=i.apply(e,t||[])).next())}))},r=function(e,t){var a,i,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(e){return function(t){return l([e,t])}}function l(n){if(a)throw new TypeError("Generator is already executing.");while(o)try{if(a=1,i&&(r=2&n[0]?i["return"]:n[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,n[1])).done)return r;switch(i=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,i=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(s){n=[6,s],i=0}finally{a=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};function n(e,t,a){for(var i="",r=t;r<t+a;r++)i+=String.fromCharCode(e.getUint8(r));return i}function o(e,t,a){for(var i=e.getUint16(t,!a),r={},n=0;n<i;n++){var o=t+12*n+2;if(274===e.getUint16(o,!a)){var s="Orientation";r[s]={value:e.getUint16(o+8,!a),offset:o+8,bigEnd:a}}}return r}function s(e,t){if("Exif"!==n(e,t,4))return console.log("Not valid EXIF data! "+n(e,t,4)),!1;var a=null,i=t+6;if(18761===e.getUint16(i))a=!1;else{if(19789!==e.getUint16(i))return console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;a=!0}if(42!==e.getUint16(i+2,!a))return console.log("Not valid TIFF data! (no 0x002A)"),!1;var r=e.getUint32(i+4,!a);if(r<8)return console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(i+4,!a)),!1;var s=o(e,i+r,a);return s}function l(e){var t=new DataView(e);if(65496!==t.getUint16(0))return!1;var a=2,i=e.byteLength,r=null;while(a<i){if(255!==t.getUint8(a))return!1;if(r=t.getUint16(a),65505===r)return s(t,a+4);a+=2+t.getUint16(a+2)}}function c(e,t){var a=t.offset,i=t.bigEnd,r=new DataView(e);return r.setUint16(a,1,!i),r.buffer}function p(e){return new Promise((function(t){var a=new FileReader;a.onload=function(){return i(this,void 0,void 0,(function(){var i,n,o;return r(this,(function(r){return i=a.result,i&&"string"!==typeof i?(n=l(i),o=n&&n.Orientation&&1!==n.Orientation.value,o&&(i=c(i,n.Orientation),e=new File([i],e.name,{type:e.type})),t({orientation:n&&n.Orientation?n.Orientation.value:1,file:e}),[2]):(t({file:e,orientation:1}),[2])}))}))},a.readAsArrayBuffer(e)}))}var u=a(690),d=a(539),h=function(e,t,a,i){function r(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function o(e){try{l(i.next(e))}catch(t){n(t)}}function s(e){try{l(i["throw"](e))}catch(t){n(t)}}function l(e){e.done?a(e.value):r(e.value).then(o,s)}l((i=i.apply(e,t||[])).next())}))},f=function(e,t){var a,i,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(e){return function(t){return l([e,t])}}function l(n){if(a)throw new TypeError("Generator is already executing.");while(o)try{if(a=1,i&&(r=2&n[0]?i["return"]:n[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,n[1])).done)return r;switch(i=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,i=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(s){n=[6,s],i=0}finally{a=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};function m(e){return h(this,void 0,void 0,(function(){var t,a,i,r,n,o,s;return f(this,(function(l){switch(l.label){case 0:return[4,p(e)];case 1:return t=l.sent(),a=t.orientation,i=t.file,1===a?[2,e]:(r=Object(d["a"])(),n=r.canvas,o=r.ctx,[4,Object(u["a"])(i)]);case 2:switch(s=l.sent(),a){case 8:n.width=s.height,n.height=s.width,o.setTransform(0,-1,1,0,0,s.width);break;case 3:n.width=s.width,n.height=s.height,o.setTransform(-1,0,0,-1,s.width,s.height);break;case 6:n.width=s.height,n.height=s.width,o.setTransform(0,1,-1,0,s.height,0);break;default:n.width=s.width,n.height=s.height}return o.drawImage(s,0,0),[2,new Promise((function(t,a){n.toBlob((function(i){i&&t(new File([i],e.name,{type:e.type})),a(new Error("Canvas 导出失败"))}),e.type,1)}))]}}))}))}}}]);